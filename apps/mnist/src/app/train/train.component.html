<div class="p-4">
  <h1 class="text-3xl mb-4">Train</h1>
  <section class="mb-8">
    <h2 class="text-xl section-head">Training Parameters</h2>

    <div>
      <label># of training epochs:</label>
      <input
        #trainEpochs
        class="block w-full rounded-md border-0 p-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-blue-600 sm:text-sm sm:leading-6 mb-2"
        id="train-epochs"
        value="1"
      />
    </div>

    <button
      class="flex w-full justify-center rounded-md bg-blue-600 px-3 py-1.5 text-sm font-semibold leading-6 text-white shadow-sm hover:bg-blue-500 disabled:bg-gray-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-600"
      id="train"
      [disabled]="loading$ | async"
      (click)="loadAndTrain(trainEpochs.value)"
    >
      {{ (loading$ | async) ? (status$ | async) : 'Load Data and Train Model' }}
    </button>
  </section>

  <div class="flex space-x-4">
    <section class="flex-1">
      <h2 class="text-xl mb-2">Training Progress</h2>
      <mhpai-loss-accuracy
        class="mb-4"
        heading="Accuracy"
        [data]="accuracy$ | async"
      ></mhpai-loss-accuracy>
      <mhpai-loss-accuracy
        class="mb-4"
        heading="Loss"
        [data]="loss$ | async"
      ></mhpai-loss-accuracy>
      <mhpai-text-output
        class="mb-4"
        heading="Status"
        [text]="log$ | async"
      ></mhpai-text-output>
    </section>

    <section class="flex-1">
      <h2 class="text-xl mb-2">Inference Examples</h2>
      <mhpai-inference [inference]="testResults$ | async"></mhpai-inference>
    </section>
  </div>
</div>
